<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="Indie elements catalog">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>Indie catalog</title>
    <meta name="description" content="Indie elements catalog">
    <link rel="import" href="bower_components/polymer/polymer-element.html">
    <link rel="import" href="bower_components/polymer/lib/elements/dom-repeat.html">
    <link rel="import" href="bower_components/iron-ajax/iron-ajax.html">

    <link rel="import" href="elements/content-wrapper.html">
    <link rel="import" href="elements/list-item.html">
    <style>
      html {
        --header-background: #fbbc05;
        --header-foreground: rgba(0,0,0,.7);
      }
      body {
        margin: 0;
        font-family: 'Roboto', 'Noto', sans-serif;
        line-height: 1.5;
        min-height: 100vh;
        background-color: #eeeeee;
      }
      list-item {
        padding: 8px 28px;
      }
    </style>
  </head>
  <body>
    <content-wrapper>
      <dom-repeat>
        <template>
          <list-item
              title="[[item.title]]"
              subtitle=[[item.subtitle]]
              demo="[[item.demo]]"
              docs="[[item.docs]]">
          </list-item>
        </template>
      </dom-repeat>

    </content-wrapper>

    <noscript>
      Please enable JavaScript to view this website.
    </noscript>

    <script>
      let fakeData = [];
      const domrepeat = document.querySelector('dom-repeat');
      const ajax = document.createElement('iron-ajax');
      ajax.url = 'catalog.json';

      ajax.generateRequest().completes.then(
        function(event) {
          let packages = event.response.packages;
          for (var el in packages) {
            // If there's a hardcoded demo or docs link, use that
            fakeData.push({
              title: el,
              subtitle: packages[el].description,
              demo: packages[el].demo ? packages[el].demo : `dist/${el}/bower_components/${el}/demo/index.html`,
              docs: packages[el].docs ? packages[el].docs : `dist/${el}/bower_components/${el}/index.html`
            });
          }
          domrepeat.items = fakeData;
        },
        function(error) {
          console.log('oops');
        }
      );
    </script>
  </body>
</html>
